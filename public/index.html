<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LAN Meeting - Giao diện Meet</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white h-screen flex flex-col">

  <!-- Top bar -->
  <header class="flex items-center justify-between px-4 py-2 bg-gray-800 shadow">
    <div class="flex items-center gap-2">
      <input id="name" placeholder="Tên hiển thị"
        class="px-2 py-1 rounded bg-gray-700 text-white focus:outline-none text-sm" />
      <input id="room" placeholder="Tên phòng"
        class="px-2 py-1 rounded bg-gray-700 text-white focus:outline-none text-sm" />
      <button id="joinBtn" class="bg-blue-600 hover:bg-blue-500 px-3 py-1 rounded text-sm">Tham gia</button>
      <button id="leaveBtn" disabled class="bg-red-600 hover:bg-red-500 px-3 py-1 rounded text-sm opacity-50">Rời phòng</button>
    </div>
    <div class="flex items-center gap-2">
      <span id="count">0</span> người
      <!-- Nút toggle sidebar -->
      <button id="toggleUser" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-sm">👥</button>
      <button id="toggleChat" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded text-sm">💬</button>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1 flex relative">

    <!-- Video grid chính -->
    <section id="videos" class="flex-1 grid gap-2 p-2 place-content-start"></section>

    <!-- Sidebar phải (ẩn mặc định) -->
    <aside id="sidebar" class="absolute right-0 top-0 h-full w-80 bg-gray-800 transform translate-x-full transition-transform duration-300 flex flex-col z-20">
      <div class="flex justify-between items-center p-2 border-b border-gray-700">
        <h3 class="font-semibold">Sidebar</h3>
        <button id="closeSidebar" class="text-gray-300 hover:text-white">✖</button>
      </div>
      <div id="userPanel" class="flex-1 overflow-y-auto p-2 hidden">
        <h4 class="font-semibold mb-2">👥 Thành viên</h4>
        <div id="userList" class="space-y-1 text-sm"></div>
      </div>
      <div id="chatPanel" class="flex-1 flex flex-col p-2 hidden">
        <h4 class="font-semibold mb-2">💬 Chat</h4>
        <div id="chatMessages" class="flex-1 overflow-y-auto space-y-1 text-sm"></div>
        <div class="flex mt-2">
          <input id="chatInput" type="text" class="flex-1 px-2 py-1 rounded bg-gray-700 focus:outline-none" placeholder="Nhập tin nhắn..." />
          <button id="sendBtn" class="ml-2 px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded">Gửi</button>
        </div>
      </div>
    </aside>

  </main>

  <!-- Bottom controls -->
  <footer class="flex justify-center gap-4 p-2 bg-gray-800">
    <button id="micBtn" disabled class="w-12 h-12 bg-gray-700 rounded-full hover:bg-gray-600">🎤</button>
    <button id="camBtn" disabled class="w-12 h-12 bg-gray-700 rounded-full hover:bg-gray-600">📷</button>
    <button id="shareBtn" disabled class="w-12 h-12 bg-gray-700 rounded-full hover:bg-gray-600">🖥️</button>
  </footer>

  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js"></script>
  <script>
    // JS toggle sidebar
    const toggleUser = document.getElementById('toggleUser');
    const toggleChat = document.getElementById('toggleChat');
    const sidebar = document.getElementById('sidebar');
    const userPanel = document.getElementById('userPanel');
    const chatPanel = document.getElementById('chatPanel');
    const closeSidebar = document.getElementById('closeSidebar');

    function showSidebar(panel) {
      sidebar.classList.remove('translate-x-full');
      userPanel.classList.add('hidden');
      chatPanel.classList.add('hidden');
      if(panel==='user') userPanel.classList.remove('hidden');
      if(panel==='chat') chatPanel.classList.remove('hidden');
    }

    toggleUser.addEventListener('click', ()=>showSidebar('user'));
    toggleChat.addEventListener('click', ()=>showSidebar('chat'));
    closeSidebar.addEventListener('click', ()=>sidebar.classList.add('translate-x-full'));
  </script>
</body>
</html>
